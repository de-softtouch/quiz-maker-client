{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\create_grade_quizzes\\\\src\\\\components\\\\grade\\\\GradeQuiz.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Box, Button, Checkbox, Container, Divider, Flex, Heading, HStack, IconButton, Progress, SimpleGrid, Text, Tooltip, VStack } from \"@chakra-ui/react\";\nimport { useParams } from \"react-router-dom\";\nimport SettingDialog from \"./SettingDialog\";\nimport { ArrowDownIcon, ArrowUpIcon, TimeIcon } from \"@chakra-ui/icons\";\nimport { useQuiz } from \"../../context/QuizProvider\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst GradeQuiz = () => {\n  _s();\n\n  //get id in params\n  const {\n    id\n  } = useParams();\n  const pageRef = useRef(null);\n  const {\n    foundedQuiz,\n    setFoundedQuiz\n  } = useQuiz();\n  const [showSetting, setShowSetting] = useState(true);\n  const [progress, setProgress] = useState(0); // const [userAnswers, setUserAnswers] = useState(new Map([\n  //     [100, [1, 2, 3]],\n  //     [2, [5, 23, 31]],\n  // ]));\n\n  const [userAnswers, setUserAnswers] = useState(new Map([]));\n  useEffect(() => {\n    setShowSetting(true);\n    fetchQuiz(); // console.log(userAnswers)\n  }, []);\n\n  const fetchQuiz = async () => {\n    try {\n      const resp = await axios.get(`http://localhost:8080/api/v1/public/quiz?code=${id}`);\n\n      if (resp.status === 200) {\n        setFoundedQuiz(resp.data);\n      }\n    } catch (e) {}\n  }; // [100, [1, 2, 3]],\n  //     [2, [5, 23, 31]],\n\n\n  function onSelectedOption(e, optionId, questionId) {\n    // console.log(e.target.checked, \"QuestionID: \", questionId, \" OptionID: \", optionId);\n    let isChecked = e.target.checked; //create temp\n\n    if (isChecked) {\n      //create temp\n      let tmp = userAnswers; //get optionIDs of question by questionID\n\n      let a = tmp.get(questionId);\n\n      if (a) {\n        a.push(optionId);\n      } else {\n        a = [optionId];\n      }\n\n      tmp.set(questionId, a); //update userAnswers state\n\n      setUserAnswers(new Map(tmp.entries()));\n    } else {\n      console.log('remove item'); //create temp\n\n      let tmp = userAnswers; //get optionIDs of question by questionID\n\n      let a = tmp.get(questionId);\n\n      if (a && a.includes(optionId)) {\n        let newA = a.filter(item => item !== optionId);\n\n        if (newA == null || newA.length === 0) {\n          console.log(\"DELETE OPTION !\");\n          tmp.delete(questionId);\n          setUserAnswers(new Map(tmp.entries()));\n        } else {\n          tmp.set(questionId, newA);\n          setUserAnswers(new Map(tmp.entries()));\n        }\n      }\n    } //         setUserAnswers(prevState =>\n    //             new Map([...prevState, [questionId,optionId]])\n    //         );\n\n\n    if (userAnswers.size === 0) {\n      console.log(\"Answer = 0\");\n      let tmp = (1 + progress) / foundedQuiz.questions.length * 100;\n      console.log(tmp);\n    } else {\n      // for (let i = 0; i < userAnswers.size; i++) {\n      //     let key = userAnswers.keys().next().value;\n      //     if (key !== questionId) {\n      //         console.log(\"New key added\");\n      //         let tmp = ((1 + progress) / foundedQuiz.questions.length) * 100;\n      //         console.log(tmp);\n      //     } else {\n      //         console.log(\"Old key => not add progress\")\n      //     }\n      // }\n      if (userAnswers.keys().includes(questionId)) {\n        console.log(\"Ole question\");\n      } else {\n        console.log(\"New question addedd\");\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: pageRef,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      minH: '100vh',\n      bg: 'gray.100',\n      p: 10,\n      align: 'center',\n      children: [showSetting && /*#__PURE__*/_jsxDEV(SettingDialog, {\n        setShow: setShowSetting\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 33\n      }, this), !showSetting && /*#__PURE__*/_jsxDEV(Box, {\n        m: 10,\n        bg: 'white',\n        borderRadius: 'md',\n        boxShadow: 'xl',\n        minH: '100vh',\n        maxW: '860px',\n        p: 10,\n        children: [/*#__PURE__*/_jsxDEV(VStack, {\n          position: 'relative',\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            pb: 10,\n            fontSize: 25,\n            children: foundedQuiz.title != null ? foundedQuiz.title : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            fontWeight: 'medium',\n            color: 'teal',\n            letterSpacing: 1,\n            fontStyle: 'italic',\n            position: 'absolute',\n            top: 0,\n            right: 0,\n            m: 5,\n            children: [foundedQuiz.questions.length, \" Questions\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 33\n          }, this), foundedQuiz.questions.map((question, i) => /*#__PURE__*/_jsxDEV(VStack, {\n            w: '100%',\n            align: 'start',\n            textAlign: 'start',\n            p: 2,\n            spacing: 5,\n            children: [/*#__PURE__*/_jsxDEV(Container, {\n              w: '100%',\n              maxW: \"4xl\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                maxW: \"4xl\",\n                children: /*#__PURE__*/_jsxDEV(Text, {\n                  fontWeight: 'medium',\n                  children: [i + 1, \". \", question.title, \" \\\\t QuestionID : \", question.questionId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(SimpleGrid, {\n              w: '100%',\n              columns: 2,\n              spacing: 2,\n              align: 'start',\n              textAlign: 'start',\n              children: question.options.map((option, i) => /*#__PURE__*/_jsxDEV(Container, {\n                w: '100%',\n                minW: 300,\n                maxW: \"xl\",\n                align: 'start',\n                textAlign: 'start',\n                alignItems: 'start',\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  padding: \"1\",\n                  maxW: \"3xl\",\n                  children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    onChange: e => onSelectedOption(e, option.optionId, question.questionId),\n                    value: option.optionId,\n                    colorScheme: 'teal',\n                    size: 'md',\n                    children: [option.content, \" \\\\t OptionID : \", option.optionId]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 65\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 61\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 57\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 45\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 41\n          }, this)), /*#__PURE__*/_jsxDEV(Box, {\n            py: 5,\n            align: 'end',\n            alignSelf: 'end',\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              alignSelf: 'end',\n              size: 'lg',\n              colorScheme: 'teal',\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(HStack, {\n          zIndex: 100,\n          position: 'fixed',\n          bottom: 10,\n          right: 20,\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            label: \"Scroll to top\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: () => window.scrollTo(0, 0),\n              colorScheme: 'teal',\n              icon: /*#__PURE__*/_jsxDEV(ArrowUpIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 47\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            label: \"Scroll to bottom\",\n            children: /*#__PURE__*/_jsxDEV(IconButton // aria-label={\"\"}\n            , {\n              onClick: () => {\n                pageRef.current.scrollIntoView({\n                  behavior: \"smooth\",\n                  block: \"end\",\n                  inline: \"nearest\"\n                });\n              },\n              colorScheme: 'teal',\n              icon: /*#__PURE__*/_jsxDEV(ArrowDownIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 47\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          p: 1,\n          position: 'fixed',\n          left: 0,\n          top: 0,\n          m: 10,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: 'md',\n            colorScheme: 'teal',\n            variant: 'outline',\n            leftIcon: /*#__PURE__*/_jsxDEV(TimeIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 104\n            }, this),\n            children: \"23:00 left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Progress, {\n          size: 'sm',\n          left: '50%',\n          transform: 'translateX(-50%)',\n          minW: '860px',\n          colorScheme: 'red',\n          maxW: '860px',\n          position: 'fixed',\n          bottom: 0,\n          value: 100\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 9\n  }, this);\n};\n\n_s(GradeQuiz, \"/+ZVB3+HV07vGOJ6s4U/gAmL1Ys=\", false, function () {\n  return [useParams, useQuiz];\n});\n\n_c = GradeQuiz;\nexport default GradeQuiz;\n\nvar _c;\n\n$RefreshReg$(_c, \"GradeQuiz\");","map":{"version":3,"sources":["C:/Users/Admin/create_grade_quizzes/src/components/grade/GradeQuiz.js"],"names":["React","useEffect","useRef","useState","Box","Button","Checkbox","Container","Divider","Flex","Heading","HStack","IconButton","Progress","SimpleGrid","Text","Tooltip","VStack","useParams","SettingDialog","ArrowDownIcon","ArrowUpIcon","TimeIcon","useQuiz","axios","GradeQuiz","id","pageRef","foundedQuiz","setFoundedQuiz","showSetting","setShowSetting","progress","setProgress","userAnswers","setUserAnswers","Map","fetchQuiz","resp","get","status","data","e","onSelectedOption","optionId","questionId","isChecked","target","checked","tmp","a","push","set","entries","console","log","includes","newA","filter","item","length","delete","size","questions","keys","title","map","question","i","options","option","content","window","scrollTo","current","scrollIntoView","behavior","block","inline"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox, Container,\r\n    Divider,\r\n    Flex,\r\n    Heading,\r\n    HStack, IconButton,\r\n    Progress,\r\n    SimpleGrid,\r\n    Text, Tooltip,\r\n    VStack\r\n} from \"@chakra-ui/react\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport SettingDialog from \"./SettingDialog\";\r\nimport {ArrowDownIcon, ArrowUpIcon, TimeIcon} from \"@chakra-ui/icons\";\r\nimport {useQuiz} from \"../../context/QuizProvider\";\r\nimport axios from \"axios\";\r\n\r\nconst GradeQuiz = () => {\r\n\r\n    //get id in params\r\n    const {id} = useParams();\r\n    const pageRef = useRef(null);\r\n    const {foundedQuiz, setFoundedQuiz} = useQuiz();\r\n    const [showSetting, setShowSetting] = useState(true);\r\n\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    // const [userAnswers, setUserAnswers] = useState(new Map([\r\n    //     [100, [1, 2, 3]],\r\n    //     [2, [5, 23, 31]],\r\n    // ]));\r\n    const [userAnswers, setUserAnswers] = useState(new Map([]));\r\n\r\n    useEffect(() => {\r\n        setShowSetting(true);\r\n        fetchQuiz();\r\n        // console.log(userAnswers)\r\n    }, []);\r\n    const fetchQuiz = async () => {\r\n        try {\r\n            const resp = await axios.get(`http://localhost:8080/api/v1/public/quiz?code=${id}`);\r\n            if (resp.status === 200) {\r\n                setFoundedQuiz(resp.data);\r\n            }\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    // [100, [1, 2, 3]],\r\n    //     [2, [5, 23, 31]],\r\n\r\n    function onSelectedOption(e, optionId, questionId) {\r\n\r\n\r\n        // console.log(e.target.checked, \"QuestionID: \", questionId, \" OptionID: \", optionId);\r\n        let isChecked = e.target.checked;\r\n        //create temp\r\n\r\n        if (isChecked) {\r\n            //create temp\r\n            let tmp = userAnswers;\r\n            //get optionIDs of question by questionID\r\n            let a = tmp.get(questionId);\r\n            if (a) {\r\n                a.push(optionId);\r\n            } else {\r\n                a = [optionId];\r\n            }\r\n            tmp.set(questionId, a);\r\n            //update userAnswers state\r\n            setUserAnswers(new Map(tmp.entries()));\r\n        } else {\r\n            console.log('remove item')\r\n            //create temp\r\n            let tmp = userAnswers;\r\n            //get optionIDs of question by questionID\r\n            let a = tmp.get(questionId);\r\n            if (a && a.includes(optionId)) {\r\n                let newA = a.filter(item => item !== optionId);\r\n                if (newA == null || newA.length === 0) {\r\n                    console.log(\"DELETE OPTION !\")\r\n                    tmp.delete(questionId);\r\n                    setUserAnswers(new Map(tmp.entries()));\r\n                } else {\r\n                    tmp.set(questionId, newA);\r\n                    setUserAnswers(new Map(tmp.entries()));\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        //         setUserAnswers(prevState =>\r\n        //             new Map([...prevState, [questionId,optionId]])\r\n        //         );\r\n\r\n\r\n        if (userAnswers.size === 0) {\r\n            console.log(\"Answer = 0\")\r\n            let tmp = ((1 + progress) / foundedQuiz.questions.length) * 100;\r\n            console.log(tmp);\r\n        } else {\r\n            // for (let i = 0; i < userAnswers.size; i++) {\r\n            //     let key = userAnswers.keys().next().value;\r\n            //     if (key !== questionId) {\r\n            //         console.log(\"New key added\");\r\n            //         let tmp = ((1 + progress) / foundedQuiz.questions.length) * 100;\r\n            //         console.log(tmp);\r\n            //     } else {\r\n            //         console.log(\"Old key => not add progress\")\r\n            //     }\r\n            // }\r\n            if (userAnswers.keys().includes(questionId)) {\r\n                console.log(\"Ole question\")\r\n            } else {\r\n                console.log(\"New question addedd\")\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div ref={pageRef}>\r\n            <Box\r\n                minH={'100vh'}\r\n                bg={'gray.100'}\r\n                p={10}\r\n                align={'center'}>\r\n\r\n                {/*<Box minH={'80px'}></Box>*/}\r\n                {showSetting && <SettingDialog setShow={setShowSetting}/>}\r\n                {/*A4*/}\r\n                {\r\n                    !showSetting && (\r\n                        <Box\r\n                            m={10}\r\n                            bg={'white'}\r\n                            borderRadius={'md'}\r\n                            boxShadow={'xl'}\r\n                            minH={'100vh'}\r\n                            maxW={'860px'}\r\n                            p={10}>\r\n                            <VStack position={'relative'}>\r\n                                {/*\r\n                        QUIZ TITLE\r\n                        */}\r\n                                <Heading\r\n                                    pb={10}\r\n                                    fontSize={25}>\r\n                                    {foundedQuiz.title != null ? foundedQuiz.title : ''}\r\n                                </Heading>\r\n                                <Text\r\n                                    fontWeight={'medium'}\r\n                                    color={'teal'}\r\n                                    letterSpacing={1}\r\n                                    fontStyle={'italic'}\r\n                                    position={'absolute'}\r\n                                    top={0}\r\n                                    right={0}\r\n                                    m={5}>\r\n                                    {foundedQuiz.questions.length} Questions\r\n                                </Text>\r\n                                {/*QUESTIONS*/}\r\n                                {\r\n                                    foundedQuiz.questions.map((question, i) => (\r\n                                        <VStack\r\n                                            w={'100%'}\r\n                                            align={'start'}\r\n                                            textAlign={'start'\r\n                                            } key={i}\r\n                                            p={2}\r\n                                            spacing={5}>\r\n                                            {/*\r\n                                    QUESTION TITLE\r\n                                    */}\r\n                                            <Container w={'100%'} maxW=\"4xl\">\r\n                                                <Box maxW=\"4xl\">\r\n                                                    <Text fontWeight={'medium'}>\r\n                                                        {i + 1}. {question.title} \\t QuestionID : {question.questionId}\r\n                                                    </Text>\r\n                                                </Box>\r\n                                            </Container>\r\n                                            {/*OPTIONS*/}\r\n                                            <SimpleGrid\r\n                                                w={'100%'}\r\n                                                columns={2}\r\n                                                spacing={2}\r\n                                                align={'start'}\r\n                                                textAlign={'start'}>\r\n                                                {\r\n                                                    question.options.map((option, i) => (\r\n                                                        <Container\r\n                                                            w={'100%'}\r\n                                                            minW={300}\r\n                                                            key={i}\r\n                                                            maxW=\"xl\"\r\n                                                            align={'start'}\r\n                                                            textAlign={'start'}\r\n                                                            alignItems={'start'}\r\n                                                        >\r\n                                                            <Box padding=\"1\" maxW=\"3xl\">\r\n                                                                <Checkbox\r\n                                                                    onChange={(e) => onSelectedOption(e, option.optionId, question.questionId)}\r\n                                                                    value={option.optionId}\r\n                                                                    colorScheme={'teal'}\r\n                                                                    size={'md'}>\r\n                                                                    {option.content} \\t OptionID : {option.optionId}\r\n                                                                </Checkbox>\r\n                                                            </Box>\r\n                                                        </Container>\r\n                                                    ))\r\n                                                }\r\n                                            </SimpleGrid>\r\n                                            <Divider/>\r\n                                        </VStack>\r\n                                    ))\r\n                                }\r\n                                {/* Submit button*/}\r\n                                <Box py={5} align={'end'} alignSelf={'end'}>\r\n                                    <Button alignSelf={'end'} size={'lg'} colorScheme={'teal'}>Submit</Button>\r\n                                </Box>\r\n                            </VStack>\r\n\r\n                            {/* FIXED CONTENTS*/}\r\n                            <HStack zIndex={100} position={'fixed'} bottom={10} right={20}>\r\n                                <Tooltip label={\"Scroll to top\"}>\r\n                                    <IconButton\r\n                                        onClick={() => window.scrollTo(0, 0)}\r\n                                        colorScheme={'teal'}\r\n                                        icon={<ArrowUpIcon/>}/>\r\n                                </Tooltip>\r\n                                <Tooltip label={\"Scroll to bottom\"}>\r\n                                    <IconButton\r\n                                        // aria-label={\"\"}\r\n                                        onClick={() => {\r\n                                            pageRef.current.scrollIntoView({\r\n                                                behavior: \"smooth\",\r\n                                                block: \"end\",\r\n                                                inline: \"nearest\"\r\n                                            })\r\n                                        }}\r\n                                        colorScheme={'teal'}\r\n                                        icon={<ArrowDownIcon/>}/>\r\n                                </Tooltip>\r\n                            </HStack>\r\n                            <Flex p={1} position={'fixed'} left={0} top={0} m={10}>\r\n                                <Button size={'md'} colorScheme={'teal'} variant={'outline'} leftIcon={<TimeIcon/>}>23:00\r\n                                    left</Button>\r\n                            </Flex>\r\n                            <Progress\r\n                                size={'sm'}\r\n                                left={'50%'}\r\n                                transform={'translateX(-50%)'}\r\n                                minW={'860px'}\r\n                                colorScheme={'red'}\r\n                                maxW={'860px'}\r\n                                position={'fixed'}\r\n                                bottom={0}\r\n                                value={100}/>\r\n                        </Box>\r\n\r\n\r\n                    )\r\n                }\r\n\r\n\r\n            </Box>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GradeQuiz;"]},"metadata":{},"sourceType":"module"}